<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Club Hub</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .auth-container{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary),var(--secondary));padding:2rem}
        .auth-card{background:var(--bg-card);border-radius:var(--radius-xl);padding:3rem;max-width:450px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.3)}
        .auth-header{text-align:center;margin-bottom:2rem}
        .auth-logo{width:80px;height:80px;margin:0 auto 1.5rem;background:linear-gradient(135deg,var(--primary),var(--secondary));border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;font-size:2.5rem;color:white}
        .auth-title{font-size:2rem;font-weight:700;margin-bottom:.5rem}
        .auth-subtitle{color:var(--text-secondary);font-size:.9375rem}
        .form-group{margin-bottom:1.5rem}
        .form-label{display:block;font-size:.875rem;font-weight:600;margin-bottom:.5rem;color:var(--text-primary)}
        .form-input{width:100%;padding:.875rem 1rem;background:var(--bg-tertiary);border:1px solid var(--border);border-radius:var(--radius-md);font-size:.875rem;color:var(--text-primary);font-family:inherit;transition:all var(--transition)}
        .form-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(59,130,246,.1)}
        .form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
        .btn-auth{width:100%;padding:1rem;background:linear-gradient(135deg,var(--primary),var(--secondary));color:white;border:none;border-radius:var(--radius-md);font-size:1rem;font-weight:600;cursor:pointer;transition:all var(--transition)}
        .btn-auth:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(59,130,246,.4)}
        .btn-auth:disabled{opacity:.6;cursor:not-allowed;transform:none}
        .auth-link{text-align:center;margin-top:1.5rem}
        .auth-link a{color:var(--primary);text-decoration:none;font-weight:600}
        .auth-link a:hover{text-decoration:underline}
        .alert{padding:1rem;border-radius:var(--radius-md);margin-bottom:1.5rem;display:none}
        .alert.show{display:block}
        .alert-error{background:rgba(239,68,68,.1);border:1px solid var(--danger);color:var(--danger)}
        .alert-success{background:rgba(16,185,129,.1);border:1px solid var(--success);color:var(--success)}
        .password-strength{margin-top:.5rem;font-size:.75rem}
        .strength-bar{height:4px;background:var(--border);border-radius:2px;margin-top:.25rem;overflow:hidden}
        .strength-fill{height:100%;width:0;transition:all .3s}
        .strength-weak .strength-fill{width:33%;background:var(--danger)}
        .strength-medium .strength-fill{width:66%;background:var(--warning)}
        .strength-strong .strength-fill{width:100%;background:var(--success)}
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <div class="auth-logo"><i class="fas fa-users-cog"></i></div>
                <h1 class="auth-title">Create Account</h1>
                <p class="auth-subtitle">Join Club Hub and start managing your clubs</p>
            </div>
            <div id="alertMessage" class="alert"></div>
            <form id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="firstName">First Name</label>
                        <input type="text" id="firstName" class="form-input" placeholder="John" required autocomplete="given-name" />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="lastName">Last Name</label>
                        <input type="text" id="lastName" class="form-input" placeholder="Doe" required autocomplete="family-name" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="email">Email Address</label>
                    <input type="email" id="email" class="form-input" placeholder="your.email@example.com" required autocomplete="email" />
                </div>
                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <input type="password" id="password" class="form-input" placeholder="At least 8 characters" required autocomplete="new-password" minlength="8" />
                    <div class="password-strength" id="passwordStrength"><div class="strength-bar"><div class="strength-fill"></div></div></div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="form-input" placeholder="Re-enter your password" required autocomplete="new-password" />
                </div>
                <button type="submit" class="btn-auth" id="registerBtn"><i class="fas fa-user-plus"></i> Create Account</button>
            </form>
            <div class="auth-link">Already have an account? <a href="login.html">Sign in</a></div>
        </div>
    </div>
    <script>
        document.getElementById('password').addEventListener('input', (e) => {
            const password = e.target.value;
            const strength = document.getElementById('passwordStrength');
            if (password.length === 0) { strength.className = 'password-strength'; return; }
            let score = 0;
            if (password.length >= 8) score++;
            if (password.length >= 12) score++;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) score++;
            if (/\d/.test(password)) score++;
            if (/[^a-zA-Z\d]/.test(password)) score++;
            strength.className = score <= 2 ? 'password-strength strength-weak' : (score <= 3 ? 'password-strength strength-medium' : 'password-strength strength-strong');
        });
        
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const btn = document.getElementById('registerBtn');
            const alert = document.getElementById('alertMessage');
            
            if (password !== confirmPassword) {
                alert.className = 'alert alert-error show';
                alert.innerHTML = '<i class="fas fa-exclamation-circle"></i> Passwords do not match';
                return;
            }
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating account...';
            
            try {
                const response = await fetch('api/auth.php?action=register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ first_name: firstName, last_name: lastName, email, password })
                });
                const data = await response.json();
                
                if (data.success) {
                    alert.className = 'alert alert-success show';
                    alert.innerHTML = '<i class="fas fa-check-circle"></i> Account created! Redirecting...';
                    setTimeout(() => { window.location.href = 'index.html'; }, 1500);
                } else {
                    alert.className = 'alert alert-error show';
                    alert.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + data.message;
                    btn.disabled = false;
                    btn.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert.className = 'alert alert-error show';
                alert.innerHTML = '<i class="fas fa-exclamation-circle"></i> An error occurred. Please try again.';
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';
            }
        });
    </script>
</body>
</html>
